---
title: KubeSphere 3.3.1 鉴权优化详解
description: 基于提升角色的安全性和易用性的考虑，在新版本 KubeSphere 3.3.1 中对权限控制模块进行了一次调整。
keywords: KubeSphere, Kubernetes, 认证, 鉴权
css: scss/live-detail.scss

section1:
  snapshot: 
  videoUrl: //player.bilibili.com/player.html?aid=559818760&bvid=BV1We4y117W7&cid=880915086&page=1&high_quality=1
  type: iframe
  time: 2022-11-03 20:00-21:00
  timeIcon: /images/live/clock.svg
  base: 线上
  baseIcon: /images/live/base.svg
---
## 分享内容简介

基于提升角色的安全性和易用性的考虑，在新版本 KubeSphere 3.3.1 中对权限控制模块进行了一次调整。这次直播主要会介绍详细的变化细节，及升级到新版本后对相关角色的变动。

## 讲师简介

周文浩，青云科技研发工程师，KubeSphere Maintainer。热爱云原生，热爱开源，目前负责KubeSphere 权限控制的开发与维护。

## 分享大纲

![](https://pek3b.qingstor.com/kubesphere-community/images/authorization1103-live.png)

## 直播时间

2022 年 11 月 03 日 20:00-21:00

## 直播地址

B 站  https://live.bilibili.com/22580654

## PPT 下载

可扫描官网底部二维码，关注 「KubeSphere云原生」公众号，后台回复 `20221103` 即可下载 PPT。

## Q & A

### Q1：权限力度是否可以更细一点？我们目前用项目（namespace）来区分环境，测试人员在测试环境是所有权限，开发人员有时候需要更改测试环境的配置（configmap），或者进入容器内查看一些日志等，目前需要给开发人员管理权限才可实现。就是开发人员在测试环境只能有进入容器和改某个配置的权限即可。

A：目前还不能给某个资源配置权限，且如果自己用 rolebinding 绑定其也无法应用到 KubeSphere 的租户中。因为 KubeSphere 的前端界面暂时无法判定租户对某个资源的权限。

### Q2：集群管理员可以授权集群给所有的企业空间吗？还是只能授权给某个或某几个企业空间？这种设计的话是不是某个集群（我设置集群可见性的时候）的管理员可以看到所有的企业空间？

A：集群管理员只能查看已部署在本集群的企业空间，和自己有权限查看的企业空间（例如，有一个租户既是集群管理员，又是 Platform-self-provisioner, 此租户就可以自己创建企业空间，且自己给集群授权企业空间的可用性。）此外，平台级管理员则可以看到所有的企业空间及给任何企业空间授权任何集群的使用权限。

### Q3：企业空间能看到集群的剩余资源吗？如何配置企业空间对集群使用的配额？企业空间的配额由平台管理员进行分配的吗？

A：租户在企业空间内无法看到集群的资源使用量或者剩余资源。如果需要配置企业空间的配额，可以让平台管理员限制其使用配额。

### Q4：新建的命名空间有默认配额吗？如何保证一个集群被多个企业空间使用，而不至于其他企业空间受限？

A：新建的命名空间没有默认配额，所有命名空间默认没有配额限制。如果需要，可以让命名空间所属的企业空间或平台的管理员为其限制不配额。企业空间的配额管理也是同样的。

### Q5：集群管理员能否去管理企业空间？

A：企业空间属于平台级别资源，企业空间和集群没有隶属关系，集群管理员属于集群级别的管理员。所有集群管理员没有权限管理企业空间。

### Q6：集群管理员可以管理企业空间关联的命名空间和用户吗？

A：集群管理员可以管理其集群内的命名空间和属于本集群的集群成员。对于 namespace 来说，无论 namespace 属于那个企业空间，只要其属于此集群，集群管理员就可以管理此 namespace。对于企业空间成员，集群管理员无权管理，理由同上。

### Q7：容器可以使用 podman 吗？可以的话 KubeKey 安装如何改配置？

A：KubeKey 不支持安装 podman。

### Q8：OpenELB 和网关集成是否有计划在 UI 层面更简易的使用？

A：暂时没有新需求，社区用户有需求的话欢迎来提 [Issue](https://github.com/openelb/openelb/issues)。

### Q9：如何大批量升级已有的自定义角色用户？

A：如果的你的 KubeSphere 版本低于 v3.3.1，在升级 KubeSphere 时 ks-installer 会自动执行升级角色的 Job。

### Q10：如何升级角色？采用升级集群的方式？

A：同上。

### Q11：从 Rancher 平台转为使用 KubeSphere ，用户及角色批量导入应该怎么做呢？

A：目前我们还没有针对 Rancher 角色的迁移方案。

### Q12：微服务、服务网格这些模块，KubeSphere 是否有权限机制？和容器平台的权限联动怎么做呢？

A：目前还没有涉及微服务和服务网格相关的权限项。
